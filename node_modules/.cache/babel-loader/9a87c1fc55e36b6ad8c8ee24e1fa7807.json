{"ast":null,"code":"import axios from 'axios';\nimport { getStateValue } from '../root/localStorage'; //import { put } from 'redux-saga/effects';\n// import { logout } from '../shells/TopBar/actions';\n\nexport default function* api(action) {\n  const x = getStateValue('user') || null;\n  const token = x && x.jwt_token || localStorage.user_token || null;\n  const baseUrl = 'https://api.github.com/';\n  const form = action.containsFormData ? {\n    \"Content-Type\": \"multipart/form-data\"\n  } : {};\n  const headers = Object.assign({}, {\n    Authorization: token\n  }, form, {\n    platform_name: \"mpl\"\n  });\n\n  try {\n    const response = yield axios({\n      method: 'get',\n      url: baseUrl + action.handler,\n      //data: action.payload || null,\n      //params: action.query || null,\n      headers\n    });\n    return response;\n  } catch (error) {\n    if (error && error.response) {\n      if (error.response.status === 401) {//yield put({ type: 'USER_LOGOUT' });\n      } else if (error.response.status === 400) {\n        return error.response;\n      }\n    } // returning dummy data to ensure the calling saga doesnt get stuck\n\n\n    return {\n      data: {\n        data: null\n      },\n      error\n    };\n  }\n}","map":{"version":3,"sources":["/Users/cepl/Desktop/novapay/bnb/src/utils/api.js"],"names":["axios","getStateValue","api","action","x","token","jwt_token","localStorage","user_token","baseUrl","form","containsFormData","headers","Object","assign","Authorization","platform_name","response","method","url","handler","error","status","data"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,sBAA9B,C,CACA;AACA;;AAEA,eAAe,UAAUC,GAAV,CAAcC,MAAd,EAAsB;AACnC,QAAMC,CAAC,GAAGH,aAAa,CAAC,MAAD,CAAb,IAAyB,IAAnC;AACA,QAAMI,KAAK,GAAID,CAAC,IAAIA,CAAC,CAACE,SAAR,IAAsBC,YAAY,CAACC,UAAnC,IAAiD,IAA/D;AAEA,QAAMC,OAAO,GAAG,yBAAhB;AAEA,QAAMC,IAAI,GAAGP,MAAM,CAACQ,gBAAP,GACX;AAAE,oBAAgB;AAAlB,GADW,GAEX,EAFF;AAGF,QAAMC,OAAO,GAAGC,MAAM,CAACC,MAAP,CACd,EADc,EAEd;AAAEC,IAAAA,aAAa,EAAEV;AAAjB,GAFc,EAGdK,IAHc,EAId;AACEM,IAAAA,aAAa,EAAE;AADjB,GAJc,CAAhB;;AASE,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAAC;AAC3BkB,MAAAA,MAAM,EAAE,KADmB;AAE3BC,MAAAA,GAAG,EAAEV,OAAO,GAAEN,MAAM,CAACiB,OAFM;AAG3B;AACA;AACAR,MAAAA;AAL2B,KAAD,CAA5B;AAQA,WAAOK,QAAP;AACD,GAVD,CAUE,OAAOI,KAAP,EAAc;AACd,QAAIA,KAAK,IAAIA,KAAK,CAACJ,QAAnB,EAA6B;AAC3B,UAAII,KAAK,CAACJ,QAAN,CAAeK,MAAf,KAA0B,GAA9B,EAAmC,CACjC;AACD,OAFD,MAEO,IAAID,KAAK,CAACJ,QAAN,CAAeK,MAAf,KAA0B,GAA9B,EAAmC;AACxC,eAAOD,KAAK,CAACJ,QAAb;AACD;AACF,KAPa,CASd;;;AACA,WAAO;AAAEM,MAAAA,IAAI,EAAE;AAAEA,QAAAA,IAAI,EAAE;AAAR,OAAR;AAAwBF,MAAAA;AAAxB,KAAP;AACD;AACF","sourcesContent":["import axios from 'axios';\nimport { getStateValue } from '../root/localStorage';\n//import { put } from 'redux-saga/effects';\n// import { logout } from '../shells/TopBar/actions';\n\nexport default function* api(action) {\n  const x = getStateValue('user') || null;\n  const token = (x && x.jwt_token) || localStorage.user_token || null;\n  \n  const baseUrl = 'https://api.github.com/';\n  \n  const form = action.containsFormData\n  ? { \"Content-Type\": \"multipart/form-data\" }\n  : {};\nconst headers = Object.assign(\n  {},\n  { Authorization: token },\n  form,\n  {\n    platform_name: \"mpl\"\n  }\n);\n\n  try {\n    const response = yield axios({\n      method: 'get',\n      url: baseUrl +action.handler,\n      //data: action.payload || null,\n      //params: action.query || null,\n      headers\n    });\n\n    return response;\n  } catch (error) {\n    if (error && error.response) {\n      if (error.response.status === 401) {\n        //yield put({ type: 'USER_LOGOUT' });\n      } else if (error.response.status === 400) {\n        return error.response;\n      }\n    }\n  \n    // returning dummy data to ensure the calling saga doesnt get stuck\n    return { data: { data: null }, error };\n  }\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}